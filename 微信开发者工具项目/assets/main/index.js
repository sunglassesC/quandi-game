window.__require=function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({Demo:[function(t,e,o){"use strict";cc._RF.push(e,"f4b8dPO/MlJRb4BlCGVlcnF","Demo"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{start(){}};return t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],Dialog:[function(t,e,o){"use strict";cc._RF.push(e,"0d8e2mHmYVEwa4w7KH+jrUZ","Dialog"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{var t;let e=t=class extends cc.Component{constructor(){super(...arguments),this.titleLabel=null,this.contentLabel=null,this.confirmButton=null,this.cancelButton=null}static open(e,o,n,i){t.onConfirm=n||null,t.onCancel=i||null,t.isOpen=!0,t.title=e,t.content=o,t.node&&(t.node.active=!0)}static close(){t.onConfirm=null,t.onCancel=null,t.isOpen=!1,t.title="",t.content="",t.node&&(t.node.active=!1)}start(){t.node=this.node,this.node.on(cc.Node.EventType.TOUCH_START,t=>{t.target!==this.confirmButton.node&&t.target!==this.cancelButton.node&&t.stopPropagation()},this,!0),this.confirmButton.node.on(cc.Node.EventType.TOUCH_START,e=>{t.onConfirm&&t.onConfirm(),t.close()}),this.cancelButton.node.on(cc.Node.EventType.TOUCH_START,e=>{t.onCancel&&t.onCancel(),t.close()})}update(e){this.titleLabel&&this.titleLabel.string!==t.title&&(this.titleLabel.string=t.title),this.contentLabel&&this.contentLabel.string!==t.content&&(this.contentLabel.string=t.content),this.node&&(this.node.active=t.isOpen)}};return e.onConfirm=null,e.onCancel=null,e.title="",e.content="",e.isOpen=!1,e.node=null,__decorate([i(cc.Label)],e.prototype,"titleLabel",void 0),__decorate([i(cc.Label)],e.prototype,"contentLabel",void 0),__decorate([i(cc.Button)],e.prototype,"confirmButton",void 0),__decorate([i(cc.Button)],e.prototype,"cancelButton",void 0),e=t=__decorate([n],e)})();o.default=c,cc._RF.pop()},{}],EntryRoomButtton:[function(t,e,o){"use strict";cc._RF.push(e,"a22b09K4p5Kr6T56oYj3Vn8","EntryRoomButtton"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.buttonNode=null,this.inputNode=null,this.submitButton=null,this.cancelButton=null,this.editBox=null,this.onSubmit=null,this.onButtonClick=null}showInput(){this.inputNode.active=!0,this.buttonNode.active=!1}closeInput(){this.inputNode.active=!1,this.buttonNode.active=!0}setEnable(t){this.closeInput(),this.buttonNode.children[1].color=t?new cc.Color(255,255,255):new cc.Color(107,110,120),this.buttonNode.children[2].opacity=t?255:76}start(){this.closeInput(),this.cancelButton&&this.cancelButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.closeInput()),this.submitButton&&this.submitButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onSubmit&&this.onSubmit(this.editBox.string)),this.buttonNode.on(cc.Node.EventType.TOUCH_START,()=>this.onButtonClick&&this.onButtonClick())}};return __decorate([i(cc.Node)],t.prototype,"buttonNode",void 0),__decorate([i(cc.Node)],t.prototype,"inputNode",void 0),__decorate([i(cc.Button)],t.prototype,"submitButton",void 0),__decorate([i(cc.Button)],t.prototype,"cancelButton",void 0),__decorate([i(cc.EditBox)],t.prototype,"editBox",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],FrameSyncLogic:[function(t,e,o){"use strict";cc._RF.push(e,"fd030cOaOxFvKPueSWMFkDt","FrameSyncLogic"),Object.defineProperty(o,"__esModule",{value:!0}),o.calcFrame=o.setDefauleFrameState=o.reCalcFrameState=o.random=o.pushFrames=o.clearFrames=o.frameSyncState=o.FrameSyncCmd=void 0;const n=t("../global"),i=t("./Game"),c=t("./Player");let s=[],a=new i.Game([],[]);(function(t){t[t.run=1]="run",t[t.stop=2]="stop",t[t.joystick=3]="joystick"})(o.FrameSyncCmd||(o.FrameSyncCmd={})),o.frameSyncState={gamestate:a},o.clearFrames=function(){s=[]},o.pushFrames=function(t){s.push(t)},o.random=function(t,e,o){return Math.round(Math.random()*(e-t)*Math.pow(10,o))/Math.pow(10,o)},o.reCalcFrameState=function(t){u(t),s.forEach(t=>{f(t)})};const r=c.Player.mapSize,l=[[0,r*Math.sqrt(3)/2],[2*r,r*Math.sqrt(3)/2],[r/2,0],[r/2*3,r*Math.sqrt(3)],[r/2*3,0],[r/2,r*Math.sqrt(3)]];function u(t){(t.roomInfo||{playerList:[]}).playerList.forEach((t,e)=>{o.frameSyncState.gamestate.players.find(e=>e.name===t.id)||o.frameSyncState.gamestate.addPlayer(t.id,l[e],1)})}o.setDefauleFrameState=u;const d=1;function h(t,e){const n=o.frameSyncState.gamestate.players.find(e=>e.name===t)||{};10===e[0]&&10===e[1]?n.isDead&&n.respawnImmediately():20===e[0]&&20===e[1]?n.isDead||n.accelerate():n.direction=e}function p(t,e){if(e-t.lastUpdateFrameId>d)if(t.lastUpdateFrameId=e,t.isDead)t.respawnCountDown();else{t.move();for(const e of o.frameSyncState.gamestate.players)e!==t&&e.checkCollision(t.position)}}function f(t){1===t.id&&u(n.default.room),t.items&&t.items.length>0&&t.items.forEach(t=>{h(t.playerId,t.data.cmd)}),o.frameSyncState.gamestate.players.forEach(e=>p(e,t.id))}o.calcFrame=f,cc._RF.pop()},{"../global":"global","./Game":"Game","./Player":"Player"}],GameState:[function(t,e,o){"use strict";cc._RF.push(e,"ab792dLMhNLtIiZjO6/MJX6","GameState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"872a7B/o4FC3bHVh6LuwX1+","Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;const n=t("./Player");let i=(()=>{class t{constructor(t,e){this._players=[];for(let o=0;o<t.length;o++)this._players.push(new n.Player(t[o],e[o],1,this))}addPlayer(t,e,o){this._players.push(new n.Player(t,e,o,this))}finishQuandi(t){for(const e of this._players)e!==t&&e.checkArea(t.line)}position(t){return this._players.find(e=>e.name===t).position}line(t){return this._players.find(e=>e.name===t).line}area(t){return this._players.find(e=>e.name===t).area}get players(){return this._players}get numberOfPlayers(){return this._players.length}}return t.respawnTime=150,t})();o.Game=i,cc._RF.pop()},{"./Player":"Player"}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"fc6fehjWWBHqLeJiTPg7S+B","Home"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../config"),i=t("../util"),{ccclass:c,property:s}=cc._decorator;let a=(()=>{var t;let e=t=class extends cc.Component{constructor(){super(...arguments),this.gameIdEditBox=null,this.secretKeyEditBox=null,this.urlEditBox=null,this.mgobeNode=null,this.demoButton=null,this.courseButton=null}start(){i.checkMgobe(),t.gameId||(t.gameId=n.default.gameId,t.secretKey=n.default.secretKey,t.url=n.default.url),this.gameIdEditBox.string=t.gameId,this.secretKeyEditBox.string=t.secretKey,this.urlEditBox.string=t.url,this.demoButton.node.on(cc.Node.EventType.TOUCH_START,()=>cc.director.loadScene("demo")),this.courseButton.node.on(cc.Node.EventType.TOUCH_START,()=>i.openLink("https://cloud.tencent.com/document/product/1038/37761")),this.mgobeNode.on(cc.Node.EventType.TOUCH_START,()=>{t.gameId=this.gameIdEditBox.string,t.secretKey=this.secretKeyEditBox.string,t.url=this.urlEditBox.string,i.checkMgobe()&&cc.director.loadScene("mgobe")}),this.gameIdEditBox.node.on(cc.Node.EventType.TOUCH_START,()=>this.showTips()),this.secretKeyEditBox.node.on(cc.Node.EventType.TOUCH_START,()=>this.showTips()),this.urlEditBox.node.on(cc.Node.EventType.TOUCH_START,()=>this.showTips())}showTips(){i.appendLog("\u516c\u6709\u6e38\u620fID\u4e0b\u5206\u914d\u7684\u8d44\u6e90\u6709\u9650\u989d\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u4f53\u9a8c\u6548\u679c\uff1b\u5efa\u8bae\u5728cocos creator\u5185\u5f00\u901aMGOBE\u670d\u52a1\uff0c\u83b7\u53d6\u60a8\u7684\u79c1\u6709\u6e38\u620fID\u3002")}};return e.gameId="",e.secretKey="",e.url="",__decorate([s(cc.EditBox)],e.prototype,"gameIdEditBox",void 0),__decorate([s(cc.EditBox)],e.prototype,"secretKeyEditBox",void 0),__decorate([s(cc.EditBox)],e.prototype,"urlEditBox",void 0),__decorate([s(cc.Node)],e.prototype,"mgobeNode",void 0),__decorate([s(cc.Button)],e.prototype,"demoButton",void 0),__decorate([s(cc.Button)],e.prototype,"courseButton",void 0),e=t=__decorate([c],e)})();o.default=a,cc._RF.pop()},{"../config":"config","../util":"util"}],JoyStick:[function(t,e,o){"use strict";var n;cc._RF.push(e,"0f8feS8vSlC8rUWPPslEcvy","JoyStick"),o.__esModule=!0,o.dir=void 0,o.dir=n,cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},maxSpeed:0},onLoad:function(){cc.debug.setDisplayStats(!1),this.joyStickBtn=this.node.children[0],this.dir=cc.v2(0,0),this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchcancel",this.onTouchCancel,this)},onTouchStart:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.joyStickBtn.setPosition(e)},onTouchMove:function(t){var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e)),this.dir=this.joyStickBtn.position.normalize()},onTouchEnd:function(t){this.joyStickBtn.setPosition(cc.v2(0,0))},onTouchCancel:function(t){this.joyStickBtn.setPosition(cc.v2(0,0))},update:function(t){var e=this.joyStickBtn.position.mag()/(this.node.width/2);e>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(e)),o.dir=n=[this.joyStickBtn.position.x,this.joyStickBtn.position.y]}}),cc._RF.pop()},{}],LinkLabel:[function(t,e,o){"use strict";cc._RF.push(e,"70290CXHv5KPb3Uwdb1pOkm","LinkLabel"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../util"),{ccclass:i,property:c}=cc._decorator;let s=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.url=""}start(){this.url&&this.label.node.on(cc.Node.EventType.TOUCH_START,()=>n.openLink(this.url))}};return __decorate([c(cc.Label)],t.prototype,"label",void 0),__decorate([c],t.prototype,"url",void 0),t=__decorate([i],t)})();o.default=s,cc._RF.pop()},{"../util":"util"}],MgobeScene:[function(t,e,o){"use strict";cc._RF.push(e,"300ad9LjVJC86v1A1hsSa7o","MgobeScene"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../ui/EntryRoomButtton"),i=t("../config"),c=t("../util"),s=t("./Home"),a=t("../global"),{ccclass:r,property:l}=cc._decorator;let u=(()=>{var t;let e=t=class extends cc.Component{constructor(){super(...arguments),this.initButton=null,this.createRoomNode=null,this.matchNode=null,this.joinRoomNode=null,this.lockSubmit=!1,this.timer=void 0}start(){this.initView(),this.initListener()}initView(){this.initButton.interactable=!1,this.setEnableButtons(!0)}initListener(){this.initButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.initSDK()),this.createRoomNode.onButtonClick=(()=>this.onCreateRoomNodeClick()),this.matchNode.onButtonClick=(()=>this.onMatchNodeClick()),this.matchNode.onSubmit=(t=>!this.lockSubmit&&this.matchPlayers(t)),this.joinRoomNode.onButtonClick=(()=>this.onJoinRoomNodeClick()),this.joinRoomNode.onSubmit=(t=>!this.lockSubmit&&this.joinRoom(t)),a.default.room&&(a.default.room.onUpdate=(()=>this.onRoomUpdate()))}setEnableButtons(t){this.createRoomNode.setEnable(t),this.matchNode.setEnable(t),this.joinRoomNode.setEnable(t)}loadRoomScene(){this.lockSubmit=!0,cc.director.loadScene("room")}onCreateRoomNodeClick(){if(!c.isInited())return c.appendLog("\u8bf7\u5148\u521d\u59cb\u5316 SDK");this.setEnableButtons(!0),!this.lockSubmit&&this.createRoom()}onMatchNodeClick(){if(!c.isInited())return c.appendLog("\u8bf7\u5148\u521d\u59cb\u5316 SDK");this.setEnableButtons(!0),a.default.gameId===i.default.gameId?!this.lockSubmit&&this.matchPlayers(i.default.matchCode):this.matchNode.showInput()}onJoinRoomNodeClick(){if(!c.isInited())return c.appendLog("\u8bf7\u5148\u521d\u59cb\u5316 SDK");this.setEnableButtons(!0),this.joinRoomNode.showInput()}onRoomUpdate(){a.default.room.roomInfo&&a.default.room.roomInfo.playerList&&a.default.room.roomInfo.playerList.find(t=>t.id===MGOBE.Player.id)&&this.loadRoomScene()}onDisable(){a.default.room&&(a.default.room.onUpdate=null),clearInterval(this.timer)}initSDK(){return c.isInited()?c.appendLog("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c"):s.default.gameId&&s.default.secretKey&&s.default.url?(c.appendLog("\u6b63\u5728\u521d\u59cb\u5316 SDK"),cc.sys.isNative&&!t.cacertNativeUrl?cc.loader.loadRes("/cacert",cc.Asset,(e,o)=>{c.appendLog("\u52a0\u8f7d\u8bc1\u4e66\u7ed3\u675f "+!e),e||(t.cacertNativeUrl=o.nativeUrl,this.initSDK())}):void c.initSDK(s.default.gameId,s.default.secretKey,s.default.url,t.cacertNativeUrl,t=>{t.code===MGOBE.ErrCode.EC_OK?(c.appendLog("\u521d\u59cb\u5316 SDK \u6210\u529f"),this.initView(),a.default.room.onUpdate=(()=>this.onRoomUpdate())):c.appendLog(`\u521d\u59cb\u5316 SDK \u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})):c.appendLog("\u8bf7\u5728\u9996\u9875\u586b\u5165\u6b63\u786e\u7684 gameId\u3001secretKey\u3001url")}createRoom(){this.lockSubmit=!0,c.appendLog("\u6b63\u5728\u521b\u5efa\u623f\u95f4");const t={roomName:"cocos_demo",roomType:"create",maxPlayers:6,isPrivate:!0,customProperties:"",playerInfo:{name:"\u6d4b\u8bd5\u73a9\u5bb6",customPlayerStatus:0,customProfile:""}};a.default.room.initRoom(),a.default.room.createRoom(t,t=>{this.lockSubmit=!1,t.code===MGOBE.ErrCode.EC_OK?(c.appendLog(`\u521b\u5efa\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a${t.data.roomInfo.id}`),this.loadRoomScene()):c.appendLog(`\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}matchPlayers(t){if(!t)return c.appendLog("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5339\u914d Code");this.lockSubmit=!0,this.timer=setInterval(()=>c.appendLog("\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u8bf7\u7a0d\u7b49\u3002"),1e3),c.appendLog(`\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u5339\u914dCode\uff1a${t}\u3002\u8bf7\u7a0d\u7b49\uff0c\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u4e3a 10 \u79d2\u3002`);const e={matchCode:t,playerInfo:{name:"\u6d4b\u8bd5\u73a9\u5bb6",customPlayerStatus:0,customProfile:"",matchAttributes:[]}};a.default.room.initRoom(),a.default.room.matchPlayers(e,t=>{this.lockSubmit=!1,clearInterval(this.timer),t.code===MGOBE.ErrCode.EC_OK?(c.appendLog(`\u968f\u673a\u5339\u914d\u6210\u529f\uff0c\u623f\u95f4ID\uff1a${t.data.roomInfo.id}`),this.loadRoomScene()):c.appendLog(`\u968f\u673a\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}joinRoom(t){if(!t)return c.appendLog("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u623f\u95f4ID");this.lockSubmit=!0,c.appendLog(`\u6b63\u5728\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4ID\uff1a${t}`);const e={playerInfo:{name:"\u6d4b\u8bd5\u73a9\u5bb6",customPlayerStatus:0,customProfile:""}};a.default.room.initRoom({id:t}),a.default.room.joinRoom(e,t=>{this.lockSubmit=!1,t.code===MGOBE.ErrCode.EC_OK?(c.appendLog(`\u52a0\u5165\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a${t.data.roomInfo.id}`),this.loadRoomScene()):c.appendLog(`\u52a0\u5165\u623f\u95f4\u5931\u8d25\uff0c${t.code===MGOBE.ErrCode.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED?"\u5f53\u524d\u623f\u95f4\u73a9\u5bb6\u6570\u91cf\u5df2\u6ee1\uff0c":""}\u9519\u8bef\u7801\uff1a${t.code}`)})}};return e.cacertNativeUrl="",__decorate([l(cc.Button)],e.prototype,"initButton",void 0),__decorate([l(n.default)],e.prototype,"createRoomNode",void 0),__decorate([l(n.default)],e.prototype,"matchNode",void 0),__decorate([l(n.default)],e.prototype,"joinRoomNode",void 0),e=t=__decorate([r],e)})();o.default=u,cc._RF.pop()},{"../config":"config","../global":"global","../ui/EntryRoomButtton":"EntryRoomButtton","../util":"util","./Home":"Home"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"09e19Dh38NCPLcsqLocMYnP","Player"),Object.defineProperty(o,"__esModule",{value:!0}),o.areaProportion=o.Player=void 0;const n=t("./Game");let i=(()=>{class t{constructor(e,[o,n],i,c){this._pointRadius=10,this._speed=5,this._line=[],this._area=[],this._reservedArea=[],this._propNum=0,this._reviveTime=-1,this._inArea=!0,this._isDead=!1,this._acceleratingTime=0,this.lastUpdateFrameId=1,this._game=c,this._name=e,this._spawnPlace=[o,n],this._position=[o,n],this.distance([o,n],[0,t.mapSize*Math.sqrt(3)/2])<t.mapSize/10?(this.initArea([0,t.mapSize*Math.sqrt(3)/2],-Math.PI/3),this._spawnDirection=[1,0]):this.distance([o,n],[2*t.mapSize,t.mapSize*Math.sqrt(3)/2])<t.mapSize/10?(this.initArea([2*t.mapSize,t.mapSize*Math.sqrt(3)/2],2*Math.PI/3),this._spawnDirection=[-1,0]):this.distance([o,n],[t.mapSize/2,0])<t.mapSize/10?(this.initArea([t.mapSize/2,0],0),this._spawnDirection=[.5,Math.sqrt(3)/2]):this.distance([o,n],[t.mapSize/2*3,t.mapSize*Math.sqrt(3)])<t.mapSize/10?(this.initArea([t.mapSize/2*3,t.mapSize*Math.sqrt(3)],Math.PI),this._spawnDirection=[-.5,-Math.sqrt(3)/2]):this.distance([o,n],[t.mapSize/2*3,0])<t.mapSize/10?(this.initArea([t.mapSize/2*3,0],Math.PI/3),this._spawnDirection=[-.5,Math.sqrt(3)/2]):this.distance([o,n],[t.mapSize/2,t.mapSize*Math.sqrt(3)])<t.mapSize/10&&(this.initArea([t.mapSize/2,t.mapSize*Math.sqrt(3)],2*-Math.PI/3),this._spawnDirection=[.5,-Math.sqrt(3)/2]),this._direction=[this._spawnDirection[0],this._spawnDirection[1]],this._targetDirection=[this._spawnDirection[0],this._spawnDirection[1]],this.lastUpdateFrameId=i}initArea([e,o],n){const i=t.mapSize/5,c=Math.floor(2/3*Math.PI*i);for(let t=0;t<=c;t+=1){const s=2*Math.PI*t/(3*c)+n,a=i*Math.cos(s),r=i*Math.sin(s);this._reservedArea.push([e+a,o+r]),this._area.push([e+a,o+r])}this._reservedArea.push([e,o]),this._area.push([e,o]),this.getAreaProportion()}get name(){return this._name}get position(){return this._position}get line(){return this._line}get area(){return this._area}get reservedArea(){return this._reservedArea}get isDead(){return this._isDead}get pointRadius(){return this._pointRadius}set direction(t){this._targetDirection=t}set speed(t){this._speed=t}vectorToAngel(t){if(t===[0,0])return 0;if(0===t[0])return t[1]>0?90:270;if(0===t[1])return t[0]>0?0:180;const e=Math.atan(Math.abs(t[1]/t[0])),o=180/Math.PI*e;return t[0]>0?t[1]>0?o:360-o:t[1]>0?180-o:180+o}die(){this._isDead=!0,this._line.length=0,this._position=[this._spawnPlace[0],this._spawnPlace[1]],this._reviveTime=n.Game.respawnTime,this._inArea=!0}respawnCountDown(){this._reviveTime--,0===this._reviveTime&&this.respawn()}accelerate(){this._speed=10,this._acceleratingTime=75}respawn(){this._position=[this._spawnPlace[0],this._spawnPlace[1]],this._isDead=!1,this._direction=[this._spawnDirection[0],this._spawnDirection[1]],this._targetDirection=[this._spawnDirection[0],this._spawnDirection[1]],this._acceleratingTime=0,this._speed=5}respawnImmediately(){this._reviveTime=0,this.respawn()}setDirection(){const t=this.vectorToAngel(this._direction),e=this.vectorToAngel(this._targetDirection);let o=t-e,n=e-t;if(o<0&&(o+=360),n<0&&(n+=360),Math.min(o,n)<=30)this._direction=[this._targetDirection[0],this._targetDirection[1]];else{const o=(t+180)%360;if(o>t&&e>t&&e<o||o<t&&(e>t||e<o)){let e=(t+30)%360;this._direction=[Math.cos(e*Math.PI/180),Math.sin(e*Math.PI/180)]}else{let e=t-30;e<0&&(e+=360),this._direction=[Math.cos(e*Math.PI/180),Math.sin(e*Math.PI/180)]}}}move(){this._acceleratingTime>0&&(this._acceleratingTime--,0===this._acceleratingTime&&(this._speed=5)),this.setDirection();const e=[this._position[0],this._position[1]],o=Math.sqrt(Math.pow(this._direction[0],2)+Math.pow(this._direction[1],2));0!==o&&(this._position[0]+=this._direction[0]*this._speed/o,this._position[1]+=this._direction[1]*this._speed/o);const n=t.mapSize,i=[[0,n*Math.sqrt(3)/2],[n/2,0],[n/2*3,0],[2*n,n*Math.sqrt(3)/2],[n/2*3,n*Math.sqrt(3)],[n/2,n*Math.sqrt(3)]];if(this.inPolygon(i,this._position)){this.checkInOtherSpawnplace();for(let t=0;t<this._line.length-this._pointRadius/this._speed*3;t++)if(this.distance(this._line[t],this._position)<this._pointRadius)return void this.die();this._inArea?this.inPolygon(this._area,this._position)||(this._line.push([e[0],e[1]]),this._line.push([this._position[0],this._position[1]]),this._inArea=!1):this.inPolygon(this._area,this._position)?(this.updateArea(this._line),this._game.finishQuandi(this),this._inArea=!0,this._line.length=0):this._line.push([this._position[0],this._position[1]])}else this.die()}checkArea(t){let e=!1;const o=[];for(let n=0;n<t.length;n++)e?this.inPolygon(this._area,t[n])?o.push([t[n][0],t[n][1]]):(this.updateArea(o),e=!1,o.length=0):this.inPolygon(this._area,t[n])&&(o.push([t[n][0],t[n][1]]),e=!0);e&&this.updateArea(o)}updateArea(t){if(t.length<3)return;const e=[],o=[];for(const n of t)e.push(n),o.push(n);let n=0,i=0,c=1/0,s=1/0;for(let e=0;e<this._area.length;e++){const o=this.distance(this._area[e],t[0]);o<c&&(c=o,n=e);const a=this.distance(this._area[e],t[t.length-1]);a<s&&(s=a,i=e)}for(let t=i;t!==n;t=(t+1)%this._area.length)e.push(this._area[t]);e.push(this._area[n]);for(let t=i;t!==n;)o.push(this._area[t]),(t-=1)<0&&(t+=this._area.length);if(o.push(this._area[n]),this._area=[],this.inPolygon(e,[this._spawnPlace[0]+this._spawnDirection[0]*this._speed,this._spawnPlace[1]+this._spawnDirection[1]*this._speed]))for(const t of e)this._area.push(t);else for(const t of o)this._area.push(t);0===this._line.length?this.inPolygon(this._area,this._position)||this.die():this.inPolygon(this._area,this._line[0])||this.die(),this.getAreaProportion()}distance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}acreage(t){if(t.length<3)return 0;let e=0;for(let o=0;o<t.length;++o)e+=t[o][0]*t[(o+1)%t.length][1]-t[o][1]*t[(o+1)%t.length][0];return Math.abs(e/2)}getAreaProportion(){const e=t.mapSize,n=[[0,e*Math.sqrt(3)/2],[e/2,0],[e/2*3,0],[2*e,e*Math.sqrt(3)/2],[e/2*3,e*Math.sqrt(3)],[e/2,e*Math.sqrt(3)]];o.areaProportion=this.acreage(this._area)/this.acreage(n)*1e3}inPolygon(t,e){let o=0;for(let n=0;n<t.length;n++){const i=t[n],c=t[(n+1)%t.length];if(e[0]===i[0]&&e[1]===i[1])return!0;if(e[1]>Math.min(i[1],c[1])&&e[1]<=Math.max(i[1],c[1])){const t=(e[1]-i[1])*(c[0]-i[0])/(c[1]-i[1])+i[0];if(e[0]<t)o++;else if(e[0]===t)return!0}}return o%2!=0}checkInOtherSpawnplace(){for(const t of this._game.players)t!==this&&this.inPolygon(t.reservedArea,this._position)&&this.die()}checkCollision(t){for(let e=0;e<this._line.length;e++)this.distance(this._line[e],t)<this._pointRadius&&this.die()}}return t.mapSize=800,t})();o.Player=i,cc._RF.pop()},{"./Game":"Game"}],ReadOnlyEditor:[function(t,e,o){"use strict";cc._RF.push(e,"23865u8EVBMSLkz1GtoQoCL","ReadOnlyEditor"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.value="",this.editor=null}setValue(t){this.value=t}start(){this.editor=this.node.getComponent(cc.EditBox)}update(t){this.editor.string=this.value}};return t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],Room:[function(t,e,o){"use strict";cc._RF.push(e,"a5ba2lery9FjbGmYzzcIjf/","Room"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateSyncCmd=o.SyncType=o.roomId=void 0;const n=t("../global"),i=t("../util"),c=t("../ui/Dialog"),s=t("../ui/TabButton"),a=t("../ui/UIChat"),r=t("../ui/UIFrameSync"),l=t("../logic/FrameSyncLogic"),u=t("../ui/ReadOnlyEditor"),d=t("../ui/JoyStick"),{ccclass:h,property:p}=cc._decorator;var f;(function(t){t.msg="\u623f\u95f4\u5185\u53d1\u6d88\u606f",t.state="\u5b9e\u65f6\u670d\u52a1\u5668\u72b6\u6001\u540c\u6b65",t.frame="\u5e27\u540c\u6b65"})(f=o.SyncType||(o.SyncType={})),function(t){t[t.up=1]="up",t[t.down=2]="down",t[t.left=3]="left",t[t.right=4]="right"}(o.StateSyncCmd||(o.StateSyncCmd={}));let m=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.gameIdLlabel=null,this.playerIdLlabel=null,this.roomIdEditBox=null,this.onlineLlabel=null,this.leaveRoomButton=null,this.dismissRoomButton=null,this.dialogPrefab=null,this.roomMsgTabButton=null,this.frameSyncTabButton=null,this.syncTypesLabel=null,this.syncTypesTitleLabel=null,this.chatPrefab=null,this.frameSyncPrefab=null,this.contentNode=null,this.uiChat=null,this.uiFrameSync=null,this.started=!1}start(){this.initView(),this.initListener()}initView(){this.initDialog(),this.initPrefab(),this.onRoomUpdate()}initDialog(){cc.instantiate(this.dialogPrefab).parent=this.node}initListener(){n.default.room&&(n.default.room.onUpdate=(()=>this.onRoomUpdate())),this.leaveRoomButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onLeaveRoomButtonClick()),this.dismissRoomButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onDismissRoomButtonClick()),this.roomMsgTabButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onRoomMsgTabButtonClick()),this.frameSyncTabButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onFrameSyncTabButtonClick()),i.setBroadcastCallbacks(n.default.room,this,this)}initPrefab(){const t=cc.instantiate(this.chatPrefab);t.parent=this.contentNode,this.uiChat=t.getComponent(a.default),this.uiChat.onSubmit=(t=>t&&this.sendToClient(t));const e=cc.instantiate(this.frameSyncPrefab);e.parent=this.contentNode,this.uiFrameSync=e.getComponent(r.default),this.uiFrameSync.onJoystickClick=(()=>this.sendFrame(d.dir)),this.uiFrameSync.onRespawnButtonClick=(()=>this.sendFrame([10,10])),this.uiFrameSync.onAcceleratorButtonClick=(()=>this.sendFrame([20,20])),this.uiFrameSync.onStartFrameButtonClick=(()=>this.startFrameSync()),this.uiFrameSync.onStopFrameButtonClick=(()=>this.stopFrameSync())}setRoomView(){const t=n.default.room&&n.default.room.roomInfo||{playerList:[],owner:void 0};this.gameIdLlabel.string=n.default.gameId,this.playerIdLlabel.string=MGOBE.Player.id,this.roomIdEditBox.setValue(t.id||""),o.roomId=t.id,this.onlineLlabel.string=t.playerList.filter(t=>t.commonNetworkState&&t.relayNetworkState).length+""||"0",this.syncTypesLabel.string=t.customProperties||f.msg,t.owner===MGOBE.Player.id?(this.roomMsgTabButton.node.active=this.frameSyncTabButton.node.active=!0,this.syncTypesLabel.node.active=this.syncTypesTitleLabel.node.active=!1,this.leaveRoomButton.node.x=this.dismissRoomButton.node.x-20-this.dismissRoomButton.node.width,this.dismissRoomButton.node.active=!0):(this.roomMsgTabButton.node.active=this.frameSyncTabButton.node.active=!1,this.syncTypesLabel.node.active=this.syncTypesTitleLabel.node.active=!0,this.leaveRoomButton.node.x=this.dismissRoomButton.node.x,this.dismissRoomButton.node.active=!1),this.roomMsgTabButton.setActive(this.syncTypesLabel.string===f.msg),this.frameSyncTabButton.setActive(this.syncTypesLabel.string===f.frame),this.uiChat.node.active=this.roomMsgTabButton.isActive,this.uiFrameSync.node.active=this.frameSyncTabButton.isActive,t.frameSyncState===MGOBE.types.FrameSyncState.START&&this.uiFrameSync.setButtonState(!0),t.customProperties!==f.frame&&l.setDefauleFrameState({roomInfo:t}),i.appendLog(`z\u4eba\u6570: ${l.frameSyncState.gamestate.numberOfPlayers}`),t.playerList.length!==l.frameSyncState.gamestate.numberOfPlayers&&l.reCalcFrameState({roomInfo:t})}onLeaveRoomButtonClick(){c.default.open("\u786e\u5b9a\u8981\u9000\u51fa\u623f\u95f4\u7801\uff1f","\u9000\u51fa\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",()=>this.leaveRoom())}onDismissRoomButtonClick(){c.default.open("\u786e\u5b9a\u8981\u89e3\u6563\u623f\u95f4\u7801\uff1f","\u89e3\u6563\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",()=>this.dismissRoom())}onRoomMsgTabButtonClick(){this.changeCustomProperties(f.msg)}onFrameSyncTabButtonClick(){this.changeCustomProperties(f.frame)}onDisable(){n.default.room&&(n.default.room.onUpdate=null),c.default.close(),i.setBroadcastCallbacks(n.default.room,this,{}),l.clearFrames(),l.frameSyncState.gamestate.players.length=0}onRoomUpdate(){if(!(n.default.room&&n.default.room.roomInfo&&n.default.room.roomInfo.playerList&&n.default.room.roomInfo.playerList.find(t=>t.id===MGOBE.Player.id)))return cc.director.loadScene("mgobe");this.setRoomView()}changeCustomProperties(t){i.appendLog(`\u6b63\u5728\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u4e3a\uff1a${t}`),n.default.room.changeRoom({customProperties:t},t=>{t.code===MGOBE.ErrCode.EC_OK?i.appendLog("\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u6210\u529f"):i.appendLog(`\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}leaveRoom(){i.appendLog("\u6b63\u5728\u9000\u51fa\u623f\u95f4"),l.frameSyncState.gamestate.players.length=0,n.default.room.leaveRoom({},t=>{t.code===MGOBE.ErrCode.EC_OK?(i.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"),cc.audioEngine.stopMusic()):i.appendLog(`\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}dismissRoom(){i.appendLog("\u6b63\u5728\u89e3\u6563\u623f\u95f4"),l.frameSyncState.gamestate.players.length=0,n.default.room.dismissRoom({},t=>{t.code===MGOBE.ErrCode.EC_OK?(i.appendLog("\u89e3\u6563\u623f\u95f4\u6210\u529f"),cc.audioEngine.stopMusic()):i.appendLog(`\u89e3\u6563\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}sendToClient(t){i.appendLog("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");const e={recvPlayerList:[],recvType:MGOBE.types.RecvType.ROOM_ALL,msg:t};n.default.room.sendToClient(e,t=>{t.code===MGOBE.ErrCode.EC_OK?i.appendLog("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u6210\u529f"):i.appendLog(`\u53d1\u9001\u623f\u95f4\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}sendFrame(t){i.appendLog("\u6b63\u5728\u53d1\u9001\u5e27\u6d88\u606f");const e={data:{cmd:t}};n.default.room.sendFrame(e,t=>{t.code===MGOBE.ErrCode.EC_OK?i.appendLog("\u53d1\u9001\u5e27\u6d88\u606f\u6210\u529f"):i.appendLog(`\u53d1\u9001\u5e27\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}startFrameSync(){i.appendLog("\u6b63\u5728\u5f00\u59cb\u5e27\u540c\u6b65"),this.scheduleOnce(function(){this.stopFrameSync()},300),n.default.room.startFrameSync({},t=>{t.code===MGOBE.ErrCode.EC_OK?i.appendLog("\u5f00\u59cb\u5e27\u540c\u6b65\u6210\u529f"):i.appendLog(`\u5f00\u59cb\u5e27\u540c\u6b65\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}stopFrameSync(t){i.appendLog("\u6b63\u5728\u505c\u6b62\u5e27\u540c\u6b65"),n.default.room.stopFrameSync({},e=>{e.code===MGOBE.ErrCode.EC_OK?(i.appendLog("\u505c\u6b62\u5e27\u540c\u6b65\u6210\u529f"),t&&t()):i.appendLog(`\u505c\u6b62\u5e27\u540c\u6b65\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${e.code}`)})}onJoinRoom(t){i.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u8fdb\u623f")}onLeaveRoom(t){i.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u9000\u623f")}onDismissRoom(t){return i.appendLog("\u5e7f\u64ad\uff1a\u623f\u95f4\u89e3\u6563"),cc.director.loadScene("mgobe")}onStartFrame(){l.clearFrames()}onStopFrame(){l.clearFrames()}onRecvFromClient(t){this.uiChat.appendMsg(t.data.msg,t.data.sendPlayerId===MGOBE.Player.id)}onRecvFrame(t){l.pushFrames(t.data.frame),l.calcFrame(t.data.frame)}};return __decorate([p(cc.Label)],t.prototype,"gameIdLlabel",void 0),__decorate([p(cc.Label)],t.prototype,"playerIdLlabel",void 0),__decorate([p(u.default)],t.prototype,"roomIdEditBox",void 0),__decorate([p(cc.Label)],t.prototype,"onlineLlabel",void 0),__decorate([p(cc.Button)],t.prototype,"leaveRoomButton",void 0),__decorate([p(cc.Button)],t.prototype,"dismissRoomButton",void 0),__decorate([p(cc.Prefab)],t.prototype,"dialogPrefab",void 0),__decorate([p(s.default)],t.prototype,"roomMsgTabButton",void 0),__decorate([p(s.default)],t.prototype,"frameSyncTabButton",void 0),__decorate([p(cc.Label)],t.prototype,"syncTypesLabel",void 0),__decorate([p(cc.Label)],t.prototype,"syncTypesTitleLabel",void 0),__decorate([p(cc.Prefab)],t.prototype,"chatPrefab",void 0),__decorate([p(cc.Prefab)],t.prototype,"frameSyncPrefab",void 0),__decorate([p(cc.Node)],t.prototype,"contentNode",void 0),t=__decorate([h],t)})();o.default=m,cc._RF.pop()},{"../global":"global","../logic/FrameSyncLogic":"FrameSyncLogic","../ui/Dialog":"Dialog","../ui/JoyStick":"JoyStick","../ui/ReadOnlyEditor":"ReadOnlyEditor","../ui/TabButton":"TabButton","../ui/UIChat":"UIChat","../ui/UIFrameSync":"UIFrameSync","../util":"util"}],ShowRanks:[function(t,e,o){"use strict";cc._RF.push(e,"663beeLgqNIxLz06BF3E0zZ","ShowRanks");var n=t("../logic/Player");cc.Class({extends:cc.Component,properties:{wxSubContextView:cc.Node},onLoad:function(){this.initUserInfoButton()},showRanks:function(){if("undefined"!=typeof wx)if(this.wxSubContextView.active)this.wxSubContextView.active=!1,wx.getOpenDataContext().postMessage({message:"clear"});else{this.wxSubContextView.active=!0;var t=n.areaProportion;wx.getOpenDataContext().postMessage({message:t})}},initUserInfoButton:function(){if("undefined"!=typeof wx){var t=wx.getSystemInfoSync(),e=t.windowWidth,o=t.windowHeight,n=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:e,height:o,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}});n.onTap(function(t){t.userInfo?console.log("\u6388\u6743\u6210\u529f\uff01"):console.log("\u6388\u6743\u5931\u8d25\uff01"),n.hide(),n.destroy()})}}}),cc._RF.pop()},{"../logic/Player":"Player"}],StateSyncLogic:[function(t,e,o){"use strict";cc._RF.push(e,"dc097KSQHtKr7tHSSJGosLp","StateSyncLogic"),cc._RF.pop()},{}],TabButton:[function(t,e,o){"use strict";cc._RF.push(e,"b3c98BiNn9HQqgxl74vtegX","TabButton"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.bg1Node=null,this.bg2Node=null,this.isActive=!1}setActive(t){this.isActive=t}start(){}update(t){this.bg1Node.active=!this.isActive,this.bg2Node.active=!!this.isActive,this.node.getComponent(cc.Button).interactable=!this.isActive}};return __decorate([i(cc.Node)],t.prototype,"bg1Node",void 0),__decorate([i(cc.Node)],t.prototype,"bg2Node",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],TitleBar:[function(t,e,o){"use strict";cc._RF.push(e,"4bfd93AV8ZPzqKcFFi3jVPS","TitleBar"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.backBtn=null,this.backScene=""}start(){this.backScene&&this.backBtn.on(cc.Node.EventType.TOUCH_START,()=>cc.director.loadScene(this.backScene))}};return __decorate([i(cc.Node)],t.prototype,"backBtn",void 0),__decorate([i],t.prototype,"backScene",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],UIChat:[function(t,e,o){"use strict";cc._RF.push(e,"e346cxClG9LNrhvYjT/i1Sy","UIChat"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("./UIMessage"),{ccclass:i,property:c}=cc._decorator;let s=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.msgRightPrefab=null,this.msgLeftPrefab=null,this.scrollContentNode=null,this.scrollView=null,this.sendButton=null,this.msgEditBox=null,this.onSubmit=null}appendMsg(t,e){const o=e?this.msgRightPrefab:this.msgLeftPrefab,i=cc.instantiate(o);i.parent=this.scrollContentNode,i.getComponent(n.default).setMessage(t)}refreshMsgItems(){let t=30;this.scrollContentNode.children.forEach(e=>{e.y=-t,t+=e.height+10}),this.scrollContentNode.height!==t&&(this.scrollContentNode.height=t,this.scrollView.scrollToBottom())}callback(){const t=this.msgEditBox.string||"";this.onSubmit&&this.onSubmit(t),this.msgEditBox.string=""}start(){this.sendButton.node.off(cc.Node.EventType.TOUCH_START,this.callback,this),this.sendButton.node.on(cc.Node.EventType.TOUCH_START,this.callback,this)}update(t){this.refreshMsgItems()}};return __decorate([c(cc.Prefab)],t.prototype,"msgRightPrefab",void 0),__decorate([c(cc.Prefab)],t.prototype,"msgLeftPrefab",void 0),__decorate([c(cc.Node)],t.prototype,"scrollContentNode",void 0),__decorate([c(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([c(cc.Button)],t.prototype,"sendButton",void 0),__decorate([c(cc.EditBox)],t.prototype,"msgEditBox",void 0),t=__decorate([i],t)})();o.default=s,cc._RF.pop()},{"./UIMessage":"UIMessage"}],UIFrameSync:[function(t,e,o){"use strict";cc._RF.push(e,"641afWQOMJGZ7xgSV5IDdFq","UIFrameSync"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("./UIMap"),i=t("../global"),c=t("../logic/FrameSyncLogic"),{ccclass:s,property:a}=cc._decorator;let r=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.startFrameButton=null,this.map=null,this.joystick=null,this.respawnButton=null,this.acceleratorButton=null,this.bgm=null,this.onStartFrameButtonClick=null,this.onStopFrameButtonClick=null,this.onJoystickClick=null,this.onRespawnButtonClick=null,this.onAcceleratorButtonClick=null}setMapSize(t,e){const o="number"!=typeof t?this.map.w:t,n="number"!=typeof e?this.map.h:e;this.map.setMapSize(o,n)}setButtonState(t){this.startFrameButton.interactable=!t,this.respawnButton.interactable=t,this.acceleratorButton.interactable=t}start(){this.startFrameButton.node.off(cc.Node.EventType.TOUCH_START,this.onStartFrameButtonClickCallback,this),this.joystick.off(cc.Node.EventType.TOUCH_MOVE,this.onJoystickClickCallback,this),this.respawnButton.node.off(cc.Node.EventType.TOUCH_START,this.onRespawnButtonClickCallback,this),this.acceleratorButton.node.off(cc.Node.EventType.TOUCH_START,this.onAcceleratorButtonClickCallback,this),this.startFrameButton.node.on(cc.Node.EventType.TOUCH_START,this.onStartFrameButtonClickCallback,this),this.joystick.on(cc.Node.EventType.TOUCH_MOVE,this.onJoystickClickCallback,this),this.respawnButton.node.on(cc.Node.EventType.TOUCH_START,this.onRespawnButtonClickCallback,this),this.acceleratorButton.node.on(cc.Node.EventType.TOUCH_START,this.onAcceleratorButtonClickCallback,this),c.reCalcFrameState(i.default.room)}update(t){this.map.setPlayers(c.frameSyncState.gamestate.players)}onStartFrameButtonClickCallback(){var t=cc.audioEngine.playMusic(this.bgm,!1);cc.audioEngine.setLoop(t,!0),this.startFrameButton.interactable&&this.onStartFrameButtonClick&&this.onStartFrameButtonClick()}onJoystickClickCallback(){this.onJoystickClick&&this.onJoystickClick()}onRespawnButtonClickCallback(){this.respawnButton.interactable&&this.onRespawnButtonClick&&this.onRespawnButtonClick(),this.respawnButton.interactable=!1,this.respawnButton.node.opacity=100,this.scheduleOnce(function(){this.respawnButton.interactable=!0,this.respawnButton.node.opacity=255},60)}onAcceleratorButtonClickCallback(){this.acceleratorButton.interactable&&this.onAcceleratorButtonClick&&this.onAcceleratorButtonClick(),this.acceleratorButton.interactable=!1,this.acceleratorButton.node.opacity=100,this.scheduleOnce(function(){this.acceleratorButton.interactable=!0,this.acceleratorButton.node.opacity=255},60)}};return __decorate([a(cc.Button)],t.prototype,"startFrameButton",void 0),__decorate([a(n.default)],t.prototype,"map",void 0),__decorate([a(cc.Node)],t.prototype,"joystick",void 0),__decorate([a(cc.Button)],t.prototype,"respawnButton",void 0),__decorate([a(cc.Button)],t.prototype,"acceleratorButton",void 0),__decorate([a(cc.AudioClip)],t.prototype,"bgm",void 0),t=__decorate([s],t)})();o.default=r,cc._RF.pop()},{"../global":"global","../logic/FrameSyncLogic":"FrameSyncLogic","./UIMap":"UIMap"}],UILog:[function(t,e,o){"use strict";cc._RF.push(e,"c6b77FwWyJLwpcXKfx1nbCo","UILog"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{var t;let e=t=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.logLabel=null,this.contentNode=null,this.length=0}static appendLog(e){t.staticLogStrs.push(e)}setLogStr(t){this.logLabel.string=t+"\n\n"}start(){}update(e){this.length!==t.staticLogStrs.length&&this.setLogStr(t.staticLogStrs.slice(-10).join("\n")),this.length=t.staticLogStrs.length,this.contentNode.height!==this.logLabel.node.height&&(this.contentNode.height=this.logLabel.node.height,this.scrollView.scrollToBottom())}};return e.staticLogStrs=["\u6682\u65e0\u65e5\u5fd7\u4fe1\u606f"],__decorate([i(cc.ScrollView)],e.prototype,"scrollView",void 0),__decorate([i(cc.Label)],e.prototype,"logLabel",void 0),__decorate([i(cc.Node)],e.prototype,"contentNode",void 0),e=t=__decorate([n],e)})();o.default=c,cc._RF.pop()},{}],UIMap:[function(t,e,o){"use strict";cc._RF.push(e,"7bd5c689FVLhI65kaxzlAle","UIMap"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../logic/Player"),{ccclass:i,property:c}=cc._decorator;let s=null;const a=["#99E550","#8874A3","#a7acbb","#8D5524","#5e9cf7","#FE4A49"],r=["#B8EF92","#AEACC4","#bdcfd3","#B19978","#91c6f6","#F4928E"],l=["#99E550","#8874A3","#a7acbb","#8D5524","#5e9cf7","#FE4A49"],u=["#72AC3C","#66577A","#7D828B","#6A401B","#4B78B8","#C33838"];function d(t){if(!s){s=new cc.NodePool;for(let e=0;e<6;e++){let e=cc.instantiate(t);s.put(e)}}}function h(t){let e=null;return e=s.size()>0?s.get():cc.instantiate(t)}function p(t){s.put(t)}function f(t,e,o,n,i,c,s){t.moveTo(e[0]+o-s[0],e[1]-s[1]),t.fillColor=i,t.strokeColor=c,t.lineWidth=n,t.arc(e[0]-s[0],e[1]-s[1],o,0*Math.PI,2*Math.PI),t.stroke(),t.fill()}function m(t,e,o,n,i){if(0!==e.length){t.lineWidth=o,t.strokeColor=n,t.moveTo(e[0][0]-i[0],e[0][1]-i[1]);for(let o=1;o<e.length;o++)t.lineTo(e[o][0]-i[0],e[o][1]-i[1]);t.stroke()}}function g(t,e,o,n){if(0!==e.length){t.fillColor=o,t.moveTo(e[0][0]-n[0],e[0][1]-n[1]);for(let o=1;o<e.length;o++)t.lineTo(e[o][0]-n[0],e[o][1]-n[1]);t.fill()}}let _=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.playerPrefab=null,this.w=13,this.h=6,this.players=[],this.tileSize=40}setMapSize(t,e){this.w=t,this.h=e}setPlayers(t){Array.isArray(t)||(t=[]),this.players.splice(t.length).forEach(t=>p(t));for(let e=this.players.length;e<t.length;e++)this.players.push(h(this.playerPrefab));const e=n.Player.mapSize,o=t.find(t=>t.name===MGOBE.Player.id);let i=[o.position[0],o.position[1]],c=[i[0]-480,i[1]-240];const s=this.getComponent(cc.Graphics);s.clear();g(s,[[0,-100],[960,-100],[960,500],[0,500]],"#80f8fd",[0,0]);let d=[[0,e*Math.sqrt(3)/2],[e/2,0],[e/2*3,0],[2*e,e*Math.sqrt(3)/2],[e/2*3,e*Math.sqrt(3)],[e/2,e*Math.sqrt(3)]];g(s,d,"#e7fff4",c),t.forEach((t,e)=>{g(s,t.area,a[e],c)}),t.forEach((t,e)=>{m(s,t.line,5,r[e],c)}),t.forEach((t,e)=>{m(s,t.reservedArea,1,cc.Color.WHITE,c)});let _=[];_.push([d[0][0]-20/Math.sqrt(3),d[0][1]]),_.push([d[1][0]-10/Math.sqrt(3),d[1][1]-10]),_.push([d[2][0]+10/Math.sqrt(3),d[2][1]-10]),_.push([d[3][0]+20/Math.sqrt(3),d[3][1]]),_.push([d[4][0]+10/Math.sqrt(3),d[4][1]+10]),_.push([d[5][0]-10/Math.sqrt(3),d[5][1]+10]),_.push([d[0][0]-20/Math.sqrt(3),d[0][1]]),m(s,_,20,"#565f5b",c),t.forEach((t,e)=>{f(s,t.position,t.pointRadius,5,l[e],u[e],c)}),c=[0,-250];n.Player.mapSize,n.Player.mapSize,Math.sqrt(3);let y=[d[0][0]+n.Player.mapSize,d[0][1]];y[0]/=8,y[1]/=8,f(s,y,n.Player.mapSize/8,5,"#cee4da","#57605c",c);for(let t=0;t<d.length;t++)d[t][0]/=8,d[t][1]/=8;g(s,d,cc.Color.WHITE,c);let b=0;for(let e=0;e<t.length;e++)t[e]===o&&(b=e);let S=[];for(const t of o.area)S.push([t[0]/8,t[1]/8]);g(s,S,a[b],c);let v=[];for(const t of o.line)v.push([t[0]/8,t[1]/8]);m(s,v,2,r[b],c);const C=[o.position[0]/8,o.position[1]/8];f(s,C,o.pointRadius/8,1,l[b],u,c)}convertPosition(t,e){return{x:t*this.tileSize+this.tileSize/2,y:e*this.tileSize+this.tileSize/2}}start(){d(this.playerPrefab)}update(t){this.node.width=0,this.node.height=0}onDisable(){this.getComponent(cc.Graphics).clear()}};return __decorate([c(cc.Prefab)],t.prototype,"playerPrefab",void 0),t=__decorate([i],t)})();o.default=_,cc._RF.pop()},{"../logic/Player":"Player"}],UIMessage:[function(t,e,o){"use strict";cc._RF.push(e,"c031aWugCRDkZE14NBoZkdU","UIMessage"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.bgSprite=null,this.msg="",this.padding=10,this.maxLabelWidth=400}setMessage(t){this.msg=t}start(){}update(t){this.label.string!==this.msg&&(this.label.string=this.msg),this.label.node.height<30&&(this.label.overflow=cc.Label.Overflow.NONE),this.label.node.width>this.maxLabelWidth&&(this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.node.width=this.maxLabelWidth),this.bgSprite.node.width=this.label.node.width+this.padding+Math.abs(this.label.node.x-this.bgSprite.node.x),this.node.height=this.label.node.height+2*this.padding,this.bgSprite.node.height=this.node.height}};return __decorate([i(cc.Label)],t.prototype,"label",void 0),__decorate([i(cc.Sprite)],t.prototype,"bgSprite",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],UIPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"4fed5v2tVpJsoLfwroC693q","UIPlayer"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.icon1Sprite=null,this.icon2Sprite=null}initPlayer(t,e=0,o=0){t===MGOBE.Player.id?(t="\u6211",this.icon1Sprite.node.active=!0,this.icon2Sprite.node.active=!1):(this.icon1Sprite.node.active=!1,this.icon2Sprite.node.active=!0),this.label.string=t,this.setPosition(e,o)}setPosition(t,e){this.node.x=t,this.node.y=e}start(){}};return __decorate([i(cc.Label)],t.prototype,"label",void 0),__decorate([i(cc.Sprite)],t.prototype,"icon1Sprite",void 0),__decorate([i(cc.Sprite)],t.prototype,"icon2Sprite",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],UIStateSync:[function(t,e,o){"use strict";cc._RF.push(e,"195a7y/ZdVIiIl+5ujA6bFS","UIStateSync"),cc._RF.pop()},{}],config:[function(t,e,o){"use strict";cc._RF.push(e,"a8db8oM0pVCBqMY+EmxpbqN","config"),Object.defineProperty(o,"__esModule",{value:!0});o.default={gameId:"obg-lx1f8gmq",secretKey:"840491c5e72cef76ed4d86d8336711b7a190e513",url:"lx1f8gmq.wxlagame.com",openId:(()=>{let t=Date.now().toString(36);for(let e=0;e<7;e++)t+=Math.ceil(Math.random()*Math.pow(10,4)).toString(36);return t})(),matchCode:"match-c4g5esp3"},cc._RF.pop()},{}],enter1v1:[function(t,e,o){"use strict";cc._RF.push(e,"688e5N78WhNrogTBD1HMw5b","enter1v1");var n=a(t("./Home")),i=a(t("../config")),c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var c=n?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=t[i]}o.default=t,e&&e.set(t,o);return o}(t("../util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){n.default.gameId=i.default.gameId,n.default.secretKey=i.default.secretKey,n.default.url=i.default.url,i.default.matchCode="match-pqqp6qp7",c.checkMgobe(),cc.director.loadScene("mgobe")}}),cc._RF.pop()},{"../config":"config","../util":"util","./Home":"Home"}],enter2v2:[function(t,e,o){"use strict";cc._RF.push(e,"d4ab2mKSt9KnYWMCFysgxEi","enter2v2");var n=a(t("./Home")),i=a(t("../config")),c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var c=n?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=t[i]}o.default=t,e&&e.set(t,o);return o}(t("../util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){n.default.gameId=i.default.gameId,n.default.secretKey=i.default.secretKey,n.default.url=i.default.url,i.default.matchCode="match-c4g5esp3",c.checkMgobe(),cc.director.loadScene("mgobe")}}),cc._RF.pop()},{"../config":"config","../util":"util","./Home":"Home"}],enter3v3:[function(t,e,o){"use strict";cc._RF.push(e,"91f47n2MxJC57sDFDq9Nr9K","enter3v3");var n=a(t("./Home")),i=a(t("../config")),c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var c=n?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=t[i]}o.default=t,e&&e.set(t,o);return o}(t("../util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){n.default.gameId=i.default.gameId,n.default.secretKey=i.default.secretKey,n.default.url=i.default.url,i.default.matchCode="match-nbqas3l9",c.checkMgobe(),cc.director.loadScene("mgobe")}}),cc._RF.pop()},{"../config":"config","../util":"util","./Home":"Home"}],enterDemo:[function(t,e,o){"use strict";cc._RF.push(e,"8b88bmlYgdO1LvEqbvE58Ju","enterDemo");i(t("./Home")),i(t("../config")),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var s=i?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(o,c,s):o[c]=t[c]}o.default=t,e&&e.set(t,o)}(t("../util"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function i(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){cc.director.loadScene("mgobe")}}),cc._RF.pop()},{"../config":"config","../util":"util","./Home":"Home"}],enterHardness:[function(t,e,o){"use strict";cc._RF.push(e,"f94d4ohWBxKMps/04lgFD95","enterHardness"),cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){cc.director.loadScene("hardness")}}),cc._RF.pop()},{}],enterMarket:[function(t,e,o){"use strict";cc._RF.push(e,"5a261xuHItMb4BaNXXQacQn","enterMarket"),cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){cc.director.loadScene("market")}}),cc._RF.pop()},{}],enterPeople:[function(t,e,o){"use strict";cc._RF.push(e,"148f3yMDntNU611BbuH9jBP","enterPeople");var n=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var c=n?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=t[i]}o.default=t,e&&e.set(t,o);return o}(t("../util")),i=a(t("./Home")),c=a(t("../global")),s=a(t("../config"));function a(t){return t&&t.__esModule?t:{default:t}}function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){i.default.gameId=s.default.gameId,i.default.secretKey=s.default.secretKey,i.default.url=s.default.url,n.checkMgobe(),this.initSDK(),cc.director.loadScene("numPeople")},initSDK:function(){var t=this;return n.isInited()?n.appendLog("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c"):i.default.gameId&&i.default.secretKey&&i.default.url?(n.appendLog("\u6b63\u5728\u521d\u59cb\u5316 SDK"),void n.initSDK(i.default.gameId,i.default.secretKey,i.default.url,"",function(e){e.code===MGOBE.ErrCode.EC_OK?(n.appendLog("\u521d\u59cb\u5316 SDK \u6210\u529f"),t.initView(),c.default.room.onUpdate=function(){return t.onRoomUpdate()}):n.appendLog("\u521d\u59cb\u5316 SDK \u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})):n.appendLog("\u8bf7\u5728\u9996\u9875\u586b\u5165\u6b63\u786e\u7684 gameId\u3001secretKey\u3001url")}}),cc._RF.pop()},{"../config":"config","../global":"global","../util":"util","./Home":"Home"}],enterRanking:[function(t,e,o){"use strict";cc._RF.push(e,"590bf7tJ0pAXLSU4Dec7F47","enterRanking"),cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){cc.director.loadScene("ranking")}}),cc._RF.pop()},{}],enterSetting:[function(t,e,o){"use strict";cc._RF.push(e,"c2c9aQpq0JKd7UrPzEANxyy","enterSetting"),cc.Class({extends:cc.Component,properties:{},start:function(){},changeScene:function(){cc.director.loadScene("setting")}}),cc._RF.pop()},{}],global:[function(t,e,o){"use strict";cc._RF.push(e,"39d54I9xJVAHLuoGeKSDGG4","global"),Object.defineProperty(o,"__esModule",{value:!0});o.default=new class{constructor(){this.gameId="",this.room=null}},cc._RF.pop()},{}],login:[function(t,e,o){"use strict";cc._RF.push(e,"2b137na2IRIPpIY6Yz80a7L","login"),cc.Class({extends:cc.Component,properties:{},start:function(){var t={},e=window.wx.getSystemInfoSync(),o=e.screenWidth,n=e.screenHeight;window.wx.getSetting({success:function(e){if(console.log(e.authSetting),e.authSetting["scope.userInfo"])console.log("\u7528\u6237\u5df2\u6388\u6743"),window.wx.getUserInfo({success:function(e){console.log(e),t.userInfo=e.userInfo}});else{console.log("\u7528\u6237\u672a\u6388\u6743");var i=window.wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:o,height:n,backgroundColor:"#00000000",color:"#ffffff",fontSize:20,textAlign:"center",lineHeight:n}});i.onTap(function(e){e.userInfo?(console.log("\u7528\u6237\u6388\u6743:",e),t.userInfo=e.userInfo,i.destroy()):console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743:",e)})}}})}}),cc._RF.pop()},{}],purchase:[function(t,e,o){"use strict";cc._RF.push(e,"ef0b7e28GRIvJelm09Qn68T","purchase"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../ui/Dialog"),{ccclass:i,property:c}=cc._decorator;let s=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.dialogPrefab=null,this.purchaseButton=null}start(){this.initDialog(),this.initListener()}initDialog(){cc.instantiate(this.dialogPrefab).parent=this.node}initListener(){this.purchaseButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onPurchaseClick())}onPurchaseClick(){n.default.open("\u786e\u5b9a\u8981\u8d2d\u4e70\u5417\uff1f","\u70b9\u51fb\u786e\u5b9a\u4ee5\u8d2d\u4e70",()=>this.enter())}enter(){}};return __decorate([c(cc.Prefab)],t.prototype,"dialogPrefab",void 0),__decorate([c(cc.Button)],t.prototype,"purchaseButton",void 0),t=__decorate([i],t)})();o.default=s,cc._RF.pop()},{"../ui/Dialog":"Dialog"}],returnHomehome:[function(t,e,o){"use strict";cc._RF.push(e,"939d3k3dpNB2oZO8+crQsnq","returnHomehome"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let c=(()=>{let t=class extends cc.Component{constructor(){super(...arguments),this.backBtn=null,this.backScene=""}start(){this.backScene&&this.backBtn.on(cc.Node.EventType.TOUCH_START,()=>cc.director.loadScene(this.backScene))}};return __decorate([i(cc.Node)],t.prototype,"backBtn",void 0),__decorate([i],t.prototype,"backScene",void 0),t=__decorate([n],t)})();o.default=c,cc._RF.pop()},{}],share:[function(t,e,o){"use strict";cc._RF.push(e,"3d65fp/Li9L+J/2fTmq8uqo","share");var n=t("../scene/Room");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.passiveShare(),this.getWXQuery()},activeShare:function(){wx.shareAppMessage({title:"\u6211\u9080\u8bf7\u4f60\u6765\u73a9\u5708\u5730\u5927\u4f5c\u6218\u6e38\u620f~\u623f\u95f4\u53f7\u662f"+n.roomId,imageUrl:cc.url.raw("img.png"),query:"shareMsg=\u5206\u4eab\u5361\u7247\u4e0a\u6240\u5e26\u7684\u4fe1\u606f"})},passiveShare:function(){"undefined"!=typeof wx&&(wx.showShareMenu({success:function(t){console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u6210\u529f\uff01")},fail:function(t){console.log(t),console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u5931\u8d25\uff01")}}),wx.onShareAppMessage(function(){return{title:"\u6211\u9080\u8bf7\u4f60\u6765\u73a9\u5708\u5730\u5927\u4f5c\u6218\u6e38\u620f~",imageUrl:cc.url.raw("img.png"),query:"shareMsg=\u5206\u4eab\u5361\u7247\u4e0a\u6240\u5e26\u7684\u4fe1\u606f"}}))},getWXQuery:function(){if("undefined"!=typeof wx){var t=wx.getLaunchOptionsSync().query.shareMsg;return console.log(t),t}}}),cc._RF.pop()},{"../scene/Room":"Room"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"af2019VejdOX54d5RgQXrZy","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"8063arAqUBI272BtqJ3F3Pe","util"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkMgobe=o.openLink=o.appendLog=o.setBroadcastCallbacks=o.isInited=o.initSDK=void 0;const n=t("./config"),i=t("./global"),c=t("./ui/UILog"),s=t("./logic/FrameSyncLogic");function a(){return!!MGOBE.Player&&!!MGOBE.Player.id}function r(t,e,o){if(!t)return;const n={onJoinRoom:()=>t=>null,onLeaveRoom:()=>t=>null,onChangeRoom:()=>t=>null,onDismissRoom:()=>t=>null,onStartFrameSync:()=>t=>null,onStopFrameSync:()=>t=>null,onRecvFrame:t=>{s.calcFrame(t.data.frame)},onChangeCustomPlayerStatus:()=>t=>null,onRemovePlayer:()=>t=>null,onRecvFromClient:()=>t=>null,onRecvFromGameSvr:()=>t=>null,onAutoRequestFrameError:()=>t=>null};Object.keys(n).forEach(i=>{const c=o[i]?o[i].bind(e):n[i];t[i]=c})}function l(t){return c.default.appendLog(t)}o.initSDK=function(t,e,o,c,s){if(a())return s&&s({code:MGOBE.ErrCode.EC_OK});const l={gameId:n.default.gameId,openId:n.default.openId,secretKey:n.default.secretKey},u={url:n.default.url,isAutoRequestFrame:!0,cacertNativeUrl:""};Object.assign(l,{gameId:t,secretKey:e}),Object.assign(u,{url:o,cacertNativeUrl:c}),MGOBE.DebuggerLog.enable=!0,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(l,u,t=>{t.code===MGOBE.ErrCode.EC_OK&&(i.default.room=new MGOBE.Room,i.default.gameId=l.gameId,MGOBE.Listener.add(i.default.room),r(i.default.room,null,{})),s&&s({code:t.code})})},o.isInited=a,o.setBroadcastCallbacks=r,o.appendLog=l,o.openLink=function(t,e){return"undefined"==typeof window?l("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):"function"!=typeof window.open?l("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):void window.open(t,e&&"_blank")},o.checkMgobe=function(){if("undefined"!=typeof MGOBE)return!0;const t="\u8bf7\u5148\u542f\u7528\u817e\u8baf\u4e91 MGOBE \u670d\u52a1\u5bfc\u5165 MGOBE SDK\uff01";return console.log(t),l(t),!1},cc._RF.pop()},{"./config":"config","./global":"global","./logic/FrameSyncLogic":"FrameSyncLogic","./ui/UILog":"UILog"}]},{},["config","global","FrameSyncLogic","Game","GameState","Player","StateSyncLogic","login","Demo","Home","MgobeScene","Room","ShowRanks","enter1v1","enter2v2","enter3v3","enterDemo","enterHardness","enterMarket","enterPeople","enterRanking","enterSetting","purchase","returnHomehome","Dialog","EntryRoomButtton","JoyStick","LinkLabel","ReadOnlyEditor","TabButton","TitleBar","UIChat","UIFrameSync","UILog","UIMap","UIMessage","UIPlayer","UIStateSync","share","util","use_v2.1-2.2.1_cc.Toggle_event"]);