window.__require=function e(t,n,o){function r(c,i){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!i&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){return r(t[c][1][e]||e)},u,u.exports,e,t,n,o)}return n[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({OpenData:[function(e,t,n){"use strict";cc._RF.push(t,"59848xxX4RJRY8uTTjkrC+X","OpenData"),cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,content:cc.Node},onLoad:function(){var e=this;"undefined"!=typeof wx&&wx.onMessage(function(t){t.message&&("clear"!=t.message?(e.score=t.message,e.compareOldNewScore(),e.allInfoList=[],e.getFriendInfo()):e.content.removeAllChildren())})},compareOldNewScore:function(){var e=this;wx.getUserCloudStorage({keyList:["score"],success:function(t){if(t.KVDataList.length){var n=t.KVDataList[0],o=Number(n.value);if(e.score>o){var r={key:"score",value:String(e.score)};e.setNewCloudScore(r)}}else{var a={key:"score",value:String(e.score)};e.setNewCloudScore(a)}},fail:function(e){console.log(e)}})},setNewCloudScore:function(e){wx.setUserCloudStorage({KVDataList:[e],success:function(e){console.log("\u66f4\u65b0\u73a9\u5bb6\u5206\u6570\u6210\u529f\uff01")},fail:function(e){console.log(e)}})},getPlayerInfo:function(){var e=this;wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:function(t){for(var n=t.data[0],o=n.nickName,r=n.avatarUrl,a=0;a<6;a++)e.allInfoList.push({nickName:o,avatarUrl:r,score:Math.round(100*Math.random())});e.makeRanks()},fail:function(e){console.log(e)}})},getFriendInfo:function(){var e=this;wx.getFriendCloudStorage({keyList:["score"],success:function(t){for(var n=0;n<t.data.length;n++){var o=t.data[n].nickname,r=t.data[n].avatarUrl,a=0;t.data[n].KVDataList.length&&(a=t.data[n].KVDataList[0].value),e.allInfoList.push({nickName:o,avatarUrl:r,score:a})}e.makeRanks()},fail:function(e){console.log(e)}})},makeRanks:function(){this.allInfoList.sort(function(e,t){return t.score-e.score});for(var e=0;e<this.allInfoList.length;e++){var t=this.allInfoList[e].nickName,n=this.allInfoList[e].avatarUrl,o=this.allInfoList[e].score;this.createItem(e+1,t,n,o)}},createItem:function(e,t,n,o){var r=cc.instantiate(this.itemPrefab);r.children[0].getComponent(cc.Label).string=String(e),r.children[4].getComponent(cc.Label).string=t,r.children[5].getComponent(cc.Label).string=o,cc.loader.load({url:n,type:"png"},function(e,t){e&&console.error(e),r.children[1].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)}),this.content.addChild(r)}}),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,n){"use strict";cc._RF.push(t,"1e2f6Ly87pA4IjtLZu7UXyL","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["OpenData","use_v2.1-2.2.1_cc.Toggle_event"]);